<div class="trainer-dialog">
  <h2 mat-dialog-title>{{ data?.mode === 'edit' ? 'Edit Trainer' : 'Add New Trainer' }}</h2>
  
  <form [formGroup]="trainerForm" >
    <mat-dialog-content>
      <div class="row">
        <!-- Name -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Name</mat-label>
            <input matInput 
                   formControlName="name"
                   placeholder="Enter full name">
            <mat-error *ngIf="trainerForm.get('name')?.invalid && trainerForm.get('name')?.touched">
              {{ getErrorMessage('name') }}
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Email -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Email</mat-label>
            <input matInput 
                   type="email"
                   formControlName="email"
                   placeholder="Enter email address">
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="trainerForm.get('email')?.invalid && trainerForm.get('email')?.touched">
              {{ getErrorMessage('email') }}
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Password -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>{{ data?.mode === 'edit' ? 'New Password (leave blank to keep current)' : 'Password' }}</mat-label>
            <input matInput 
                   [type]="hidePassword ? 'password' : 'text'"
                   formControlName="password"
                   [placeholder]="data?.mode === 'edit' ? 'Enter new password' : 'Enter password'">
            <button mat-icon-button 
                    matSuffix 
                    type="button"
                    (click)="hidePassword = !hidePassword"
                    [attr.aria-label]="'Hide password'"
                    [attr.aria-pressed]="hidePassword">
              <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="trainerForm.get('password')?.invalid && trainerForm.get('password')?.touched">
              {{ getErrorMessage('password') }}
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Phone -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Phone Number</mat-label>
            <input matInput 
                   formControlName="phone"
                   placeholder="Enter phone number (e.g., +1234567890)">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-error *ngIf="trainerForm.get('phone')?.invalid && trainerForm.get('phone')?.touched">
              {{ getErrorMessage('phone') }}
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Age & Gender -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Age</mat-label>
            <input matInput type="number" formControlName="age" placeholder="Enter age">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
              <mat-option value="other">Other</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- DOB -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Date of Birth</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="dob" placeholder="Select date of birth">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <!-- Address -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Address Line 1</mat-label>
            <input matInput formControlName="line1" placeholder="Street, building, etc.">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" placeholder="City">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>District</mat-label>
            <input matInput formControlName="district" placeholder="District">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>State</mat-label>
            <input matInput formControlName="state" placeholder="State">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" placeholder="Country">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>ZIP / Postal Code</mat-label>
            <input matInput formControlName="zip" placeholder="Zip code">
          </mat-form-field>
        </div>

        <!-- Status & Photo URL -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Status</mat-label>
            <mat-select formControlName="IsStatus">
              <mat-option value="active">Active</mat-option>
              <mat-option value="inactive">Inactive</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <div class="upload-card">
  <!-- Image Preview -->
  <div class="image-preview">
    <ng-container *ngIf="trainerForm.get('photo')?.value; else placeholder">
      <img [src]="trainerForm.get('photo')?.value" width="120px" height="120px" alt="Preview" />
    </ng-container>
    <ng-template #placeholder>
      <div class="placeholder">No Photo</div>
    </ng-template>
  </div>

  <!-- Hidden File Input -->
  <input 
    type="file" 
    accept="image/*" 
    (change)="onLogoSelected($event)" 
    #fileInput 
    hidden
  />

  <!-- Upload Button -->
  <button mat-raised-button color="primary" class="upload-btn" (click)="fileInput.click()">
    Upload Photo
  </button>

         </div>
        </div>

      </div>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
      <button mat-button 
              type="button"
              class="cancel-button"
              (click)="onCancel()"
              [disabled]="loading">
        Cancel
      </button>
      <button mat-raised-button 
       (click)="saveTrainer()"
              class="save-button"
              type="submit"
              [disabled]="loading || trainerForm.invalid">
        <mat-spinner diameter="20" *ngIf="loading" style="margin-right: 10px;"></mat-spinner>
        {{ buttonLabel }}
      </button>
    </mat-dialog-actions>
  </form>
</div>
